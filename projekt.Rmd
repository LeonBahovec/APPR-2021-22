---
title: "Analiza nepremičninskega trga v Sloveniji"
author: "Leon Bahovec"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")

```


## Izbira teme

***
V zadnjem času smo priča vse večjemu pregrevanju gospodarstva in posledično inflaciji cen. Ker so v Sloveniji naložbe v nepremičnine znane kot praviloma varne so precej pogoste cene nepremičnin in najemnin pa so posledično vse višje. Zato sem se v projektni nalogi odločil analizirati nepremičninski trg v Sloveniji. Predvsem se bom  osredotočil na višino najemnin in pogodbenih cen pri nepremičninskih poslih. Poizkusil bom tudi ugotoviti, kaj se dogaja z rentabilnostjo oz. donosnostjo morebitne naložbe v nepremičnino. Zanima pa me tudi, kako demografski kazalci vplivajo na cene in najemnine nepremičnin v posameznih slovenskih občinah. 



## Obdelava, uvoz in čiščenje podatkov

Podatke o nepremičninskih poslih sem pridobil iz evidence trga nepremičnin, ki jih zagotavlja [GURS](https://egp.gu.gov.si/egp/). Podatke o demografskih kazalcih pa v [SURS-ovi podatkovni bazi](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/Data/2640010S.px/). Podatke sem nato uredil v sledeče 3 tabele, kot navedeno pri predstavitvi izbire teme projekta. 

#### Glave tabel 1-3:



```{r uvoz}
source("uvoz/uvoz.r", encoding="UTF-8")
kable(head(tabela.najemnin), caption = "Tabela 1: najemniški posli v sloveniji 2013 - 2020")
kable(head(tabela.nakupov), caption = "Tabela 2: kupoprodajni posli v sloveniji 2013 - 2020")
kable(head(tabela.obcin), caption = "Tabela 3: tabela demografskih kazalcev občin 2013 - 2020")
```

#### ETN

Preden začnem z analizo, naj najprej omenim nekaj težav na katere sem naletel pri evidence trga nepremičnin (ETN), ki jo zagotavlja GURS. ETN načeloma vsebuje vse kupoprodajne ter najemne posle za dano leto. Vendar že tu so podatki z vidika objektivne oz. natančne analize nepremičninskega trga rahlo neugodni. Beleženje poslov v ETN namreč že več let ni več obvezno za fizične osebe, temveč so v ETN dolžne poročati le še pravne osebe. Slednje pa imajo morda drugačne karakteristike poslovanja kot bi to imele fizične osebe. Prav tako, pa je velika težava sam način poročanja v ETN, ki se je izkazal za precej nestrukturiranega.  Nekatere nepremičnine imajo npr. v podatkih jasno navedene in ločene kleti, garaže ipd. druge ne. Velikokrat je pod enim poslom naštetih več različnih prostorov, kar onemogoča vrednotenje posamezne nepremičnine. Prav tako, je očitno veliko podatkov povsem napačnih (npr. 86 milijonska mesečna najemnina za stanovanje veliko nekaj deset kvadratnih metrov) ali pa fiktivnih (npr. kar nekaj poslov z ceno ali višino najemnine 0. Potem spet težava nastane, pri vpisovanju površin in uporabnih površin stavb. Glede na zakonsko določen način izmere, površina vsebuje vse uporabne površine, toda v nekaj deset tisočih primerih je zavedena uporabna površina višja od površine. GURS torej kot kaže ne skrbi oz. slabo skrbi za preverjanje točnosti vnosov v ETN.

Zaradi vseh naštetih težav vhodni podatki pridobljeni iz ETN niso nujno zanesljivi. Zato tudi rezultati analize niso nujno povsem točni, vendarle pa se zdi, da v kolikor odstranimo ekstremne vrednosti in neuporabne vnose, dobimo vsaj približen vpogled v zakonitosti trga nepremičnin v Sloveniji.


***

## Analiza in vizualizacija podatkov



```{r vizualizacija, include=FALSE}

source("vizualizacija/vizualizacija.r", encoding="UTF-8")


```
Za začetek si oglejmo gibanje cen in višin nepremičnin v zadnjih nekaj letih. Na prvem grafu lahko opazujemo gibanje cen, višin nepremičnin in rentabilnosti čas glede na različne tipe prostora. Vidimo lahko, da tako cene nepremičnin kot najemnine v povprečju naraščajo. Z vidika morebitne investicije se to načeloma zdi dober znak, vendale pa je rast rentabilnosti bolj zadržana. Najemnine namreč v mnogih sektorjih ne dohitevajo strme rasti cen nepremičnin. Sploh npr. pri stanovanjih, ki so pri varčevalcih zelo pogosta naložba v nepremičnine, rentabilnost pada. Zato velja biti ob naložbi v nepremičnine trenutno, sploh v luči visokih rasti cen in morebitnega nastajanja nepremičninskega balona, previden.

```{r izbira.tipa, echo=FALSE}
inputPanel(
  selectInput(
    "tip.prostora",
    label = "Tip prostora",
    choices = c("Stanovanje", 
                "Stanovanjska hisa", 
                "Parkirni prostor", 
                "Pisarniski prostori", 
                "Industrijski prostori", 
                "Garaza",
                "Tehnicni ali pomozni prostori",
                "Trgovski ali storitveni lokal",
                "Gostinski lokal", 
                "Prostori za zdravstveno dejavnost",
                "Prostori za poslovanje s strankami",
                "Kmetijski objekt",
                "Turisticni nastanitveni objekt",
                "Prostori za sport, kulturo ali izobraževanje",
                "Drugo",
                "Vse"),
    selected = "Vse"
  ),
    selectInput(
    "tip.grafa",
    label = "Tip grafa:",
    choices = c("najemnina", "rentabilnost", "cena"),
    selected = "rentabilnost"
  )
)

```


```{r graf1, echo=FALSE}
renderPlot({graf.skozi.cas(input$tip.prostora, input$tip.grafa)})
```

Sedaj pa poglejmo, kje najdemo najbolj donosne naložbe v nepremičnine. Kot smo lahko opazovali že v prvem grafu, se gibanje cen nepremičnin precej spreminja v odvisnosti od tipa napremičnine. Zato sedaj opazujmo povprečno donosnost glede na tip prostora v zadnjih 8 letih. Vidimo, da je najnižja letna donosnost prav pri stanovanjih in stanovanjskih hišah. Zdi se torej, da bi bila bolj donosna naložba v poslovno orientirane prostore (gostinski lokali, industrijski prostori, pisarniški prostori,...) kot v prostore za bivanje. Vendarle pa izračunana donosnost kaže le razmrje med povprečno letno najemnino in povprečno ceno na kvadratni meter površine. Morebitni višji stroški vzdrževanja, ki bi nastali ob lastništvu poslovnega prostora tu torej niso všteti, zato bi bilo z vidika rentabilnosti konkretne nepremičnine pomembno analizirati tudi stroške njenega vzdrževanja, saj ti tudi vplivajo na končno rentabilnost.

```{r graf2}
print(graf.rentabilnost.tip.prostora)
```

Na cene in višine najemnin nepremičnin pa zelo pomembno vpliva lokacija. Na grafu 3 in 4 sem zato pripravil zemljevida povprečne rentabilnosti in ter povprečnih višin najemnin na kvadratni meter glede na regijo. Z vidika donsnosti je najbolj optimalna Pomurska regija, kjer so v povprečju cene nepremičnin med nižjimi. Osrednjeslovenska ter obalno-kraška regija pa kljub temu, da imata najvišje najemnine v Sloveniji, dosegata najslabše rezultate kar se tiče rentabilnosti. To kaže na izredno visoko rast cen sploh npr. v Ljubljani, ki igra osredno vlogo pri kazalcih osrednjeslovenske regije, in kjer so trenutno naložbe v nepremičninski trg izredno visoke. Zdi se, da trenutno vlagatelji precenjujejo vrednost višine najemnin in so pripravljeni plačati nesorazmerno višje cene za le te. Pri iskanju donosne naložbe moramo torej biti morda pripravljeni sprejeti nekoliko nižje dohodke s strani najemnin v zameno za cenejšo nakupno ceno nepremičnine.

```{r graf34, echo=FALSE, fig.show="hold", out.width="50%"}
plot(regije.zemljevid.rentabilnost)
plot(regije.zemljevid.najemnine)
```


***

## Napredna analiza podatkov

#### Linearni model

Kot navedeno v uvodu, pa me je zanimalo tudi to, kako na višine najemnin in cen nepremičnin znotraj posamezne vplivajo njeni demografski kazalci. V luči tega sem sestavil linearni regresijski modele za napovedovanje višin najemnin, cen ter rentabilnosti v odvisnosti od demografskih značilnosti občine. 

Dobili smo linearne modele s sledečimi koeficienti glede na demografsko značilnost:
```{r analiza, include=FALSE}
source("analiza/analiza.r", encoding="UTF-8")

```
```{r lin.model, echo=FALSE}
kable(linearni.modeli)
```



#### Gručenje

Za konec sem pripravil še gručenje podobnih tipov prostorov z naložbenega vidika (torej glede na podobnost višin najemnin in cen). 

```{r grucenje, echo=FALSE}
inputPanel(
  sliderInput(
    "n.skupin",
    label = "Število skupin:",
    min = 2, max = 14, step = 1,
    value = 3
  )
)

renderPlot({diagram.skupine(primeri, primeri$oznaka, skupine(input$n.skupin), input$n.skupin)})
```
Tipi stanovanj so gručeni na podlagi hierarhičnega razvrščanja v skupine. Število skupin na grafu je v osnovi nastavljeno na 3, saj pri k = 3 nastane prvo "koleno", lahko pa poljubno nastavimo željeno stevilo skupin. Za primer treh skupin vidimo, da so si podobne nepremičnine, ki so predvsem pogoste pri storitvenih dejavnostih. Slednje nepremičnine imajo očitno razmeroma visoke nakupne cene, vendar je pri njih moč doseči dokaj visoko mesečno najemnino. Drugo skupino sestavljata stanovanja in turisticni nastanitveni objekti, ki z visokimi cenami in nizkimi najemninami med najmanj donosnimi, kar smo lahko videli tudi na grafu rentabilnosti glede na tip prostora. Tretjo skupino pa sestavljajo bolj obrtno naravnani tipi nepremičnin (industrijski, kmetijski, tehnicni objekti,...), ki imajo sicer relativno nizke najemnine toda z dokaj nizkimi nakupnimi cenami v povprečju ohranjajo dobro rentabilnost.

***


